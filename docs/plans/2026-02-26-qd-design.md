# qd — Quick Diff Review Tool

## Purpose

A CLI tool for quickly reviewing recent git changes, designed for the workflow where Claude (or any tool) makes commits and you want to see exactly what changed before moving on.

## Interface

```
qd                     # file list for last commit (default)
qd -n 3               # file list for last 3 commits squashed
qd main..HEAD          # file list for arbitrary ref range
qd -f                  # full diff, all files, non-interactive
qd -i                  # interactive: file list → pick file → see diff
```

### Default Output (file summary table)

```
 qd — 1 commit (a1b2c3f → "feat: add login page")

 #  File                        +    -   Status
 1  src/components/Login.tsx    47    0   added
 2  src/api/auth.ts             12    3   modified
 3  tests/login.test.ts         31    0   added

 3 files changed, 90 insertions, 3 deletions

 Run qd -i to review, or qd -f for full diff
```

### Interactive Mode (`qd -i`)

Shows the summary table, then prompts:

```
File number (q to quit): 2
```

Displays syntax-highlighted diff for that file, then loops back to the prompt.

## Architecture

```
qd/
├── pyproject.toml          # uv project, entry point: qd
├── src/
│   └── qd/
│       ├── __init__.py
│       ├── cli.py          # click CLI arg parsing, entry point
│       ├── git.py          # git operations (diff, log, file list)
│       └── display.py      # rich rendering (table, diff, prompts)
└── tests/
    └── test_git.py         # test git parsing logic
```

Three modules:
- **cli.py** — parses args, wires git + display together
- **git.py** — shells out to git, parses output into structured data (file list with stats, diff content per file)
- **display.py** — takes structured data, renders with rich

Dependencies: `click`, `rich`.

Installed globally via `uv tool install .`.

## Claude Code Integration

A slash command that shells out to `qd` or `qd -i`.

## Edge Cases

- **Not a git repo** — error: `"qd: not a git repo"`
- **No commits in range** — `"No changes found"`
- **Binary files** — show `[binary]` in table, skip diff display
- **Huge diffs** — truncate at 200 lines per file in interactive mode
- **Merge commits** — use `--first-parent` for effective changes
- **`-n` exceeding history** — clamp to available commits

## Non-goals

- No config files, dotfiles, or themes. Zero-config.
- Not a replacement for lazygit or a full TUI.
